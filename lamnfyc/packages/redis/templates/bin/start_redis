#!/usr/bin/env bash -e

if _check_process $REDIS_PID; then
   echo "Redis is already running."
   exit
 fi

 printf "Starting redis.."

 $VIRTUAL_ENV/bin/redis-server $VIRTUAL_ENV/conf/redis.conf \
   --logfile $VIRTUAL_ENV/logs/redis.log \
   --pidfile $REDIS_PID \
   {%- if options.unix_sockets %}
   --unixsocket $REDIS_SOCK \
   --port 0 \
   {% else %}
   --port $REDIS_PORT \
   --bind $REDIS_HOST \
   {% endif -%}
   --daemonize yes

 printf " Done\n"
